#*=====================================================================*/
#*    serrano/prgm/project/bglstone/src/makefiles/Makefile.kawa        */
#*    -------------------------------------------------------------    */
#*    Author      :  Manuel Serrano                                    */
#*    Creation    :  Wed Jan 17 14:34:35 2001                          */
#*    Last change :  Thu Jan  9 14:52:32 2003 (serrano)                */
#*    Copyright   :  2001-03 Manuel Serrano                            */
#*    -------------------------------------------------------------    */
#*    The standard Makefile to compile kawa benchmarks.                */
#*=====================================================================*/
#*---------------------------------------------------------------------*/
#*    The compile and flags                                            */
#*---------------------------------------------------------------------*/
KAWA=kawa
KFLAGS=--main -C

#*---------------------------------------------------------------------*/
#*    Basename and objects                                             */
#*---------------------------------------------------------------------*/
BENCH=
OBJECTS=$(BENCH).class

#*---------------------------------------------------------------------*/
#*    Jvm entry                                                        */
#*---------------------------------------------------------------------*/
a.kawa: $(OBJECTS)
	echo "#!/bin/sh" > a.kawa
	echo "KAWALIB=$$""{KAWALIB-/usr/local/share/java}" >> a.kawa
	echo "CLASSPATH=$$""{KAWALIB}:$$""{CLASSPATH-}" >> a.kawa
	echo "export CLASSPATH" >> a.kawa
	echo "exec java -noverify $(BENCH) \"$$""@\"" >> a.kawa
	chmod a+rx a.kawa

#*---------------------------------------------------------------------*/
#*    clean:                                                           */
#*---------------------------------------------------------------------*/
clean:
	/bin/rm -f $(OBJECTS)
	/bin/rm -f a.kawa
	/bin/rm -f *.class
	cleanup

#*---------------------------------------------------------------------*/
#*    Implicit rules                                                   */
#*---------------------------------------------------------------------*/
%.class: %.scm
	$(KAWA) $(KFLAGS) $*.scm

